### Send POST request with json body
POST http://localhost:8443/generate/sql
Content-Type: application/json

{
  "$project": {
    "column0": {"$distinct": {}},
    "column1": 1,
    "column2": 1,
    "count": {
      "$count": "column1"
    }
  },
  "$from": {
    "$project": {
      "column0": {"$distinct": {}},
      "column1": "t.name",
      "column2": 1,
      "sum": {
        "$sum": [
          "column3",
          "column4"
        ]
      },
      "summary": {
        "$switch": {
          "branches": [
            {
              "case": {
                "$eq": [
                  "scores",
                  90
                ]
              },
              "then": "100 !"
            },
            {
              "case": {
                "$gte": [
                  {
                    "$avg": "scores"
                  },
                  90
                ]
              },
              "then": "Doing great!"
            },
            {
              "case": {
                "$and": [
                  {
                    "$gte": [
                      {
                        "$avg": "scores"
                      },
                      80
                    ]
                  },
                  {
                    "$lt": [
                      {
                        "$avg": "scores"
                      },
                      90
                    ]
                  }
                ]
              },
              "then": "Doing pretty well."
            }
          ],
          "default": "No scores found."
        }
      }
    },
    "$from": [
      "table1"
    ],
    "$lookup": [
      {
        "from": "table2",
        "type": "left",
        "localField": "table1.id",
        "foreignField": "table2.id"
      }
    ],
    "$match": {
      "column1" : "funCode1",
      "$or": [
        {
          "score": {
            "$gt": 70,
            "$lt": 90
          }
        },
        {
          "views": {
            "$gte": 1000
          }
        }
      ],
      "$tuple": [{"column1": "2013-01-01", "column2": "2013-12-01", "column3": "123"}, {"column1": "2013-01-03", "column2": "2013-12-03", "column3": "1233"}],
      "columnDate": {"$between": {"from": {"$parseDate": {"date": "2023-01-01", "format":  "%Y%m%d"}}, "to": {"$parseDate": {"date": "2023-12-01", "format":  "%Y%m%d"}}}}
    }
  },
  "$group": {
    "_id": [
      "column1",
      "column2"
    ]
  },
  "$sort": {
    "column1": 1,
    "column2": -1
  },
  "$limit": 100,
  "$skip": 100
}


### Send POST request with json body
POST http://localhost:8443/generate/sql
Content-Type: application/json

{
  "$project": {
    "column1": 1,
    "column2": 1,
    "sum": {
      "$sum": [
        "column3",
        "column4"
      ]
    },
    "summary": {
      "$switch": {
        "branches": [
          {
            "case": {
              "$eq": [
                "scores",
                90
              ]
            },
            "then": "100 !"
          },
          {
            "case": {
              "$gte": [
                {
                  "$avg": "scores"
                },
                90
              ]
            },
            "then": "Doing great!"
          },
          {
            "case": {
              "$and": [
                {
                  "$gte": [
                    {
                      "$avg": "scores"
                    },
                    80
                  ]
                },
                {
                  "$lt": [
                    {
                      "$avg": "scores"
                    },
                    90
                  ]
                }
              ]
            },
            "then": "Doing pretty well."
          }
        ],
        "default": "No scores found."
      }
    }
  },
  "$from": [
    "table1"
  ],
  "$lookup": [
    {
      "from": "table2",
      "type": "left",
      "localField": "table1.id",
      "foreignField": "table2.id"
    }
  ],
  "$match": {
    "column1": "funCode1",
    "$or": [
      {
        "score": {
          "$gt": 70,
          "$lt": 90
        }
      },
      {
        "views": {
          "$gte": 1000
        }
      }
    ]
  },
  "$group": {
    "_id": [
      "column1",
      "column2"
    ],
    "ct": {
      "$count": {}
    }
  },
  "$sort": {
    "column1": 1,
    "column2": -1
  },
  "$limit": 100,
  "$skip": 100
}


### Send POST request with json body
POST http://localhost:8443/generate/sql
Content-Type: application/json

{
  "$from": [
    "table1"
  ],
  "$project": {
    "total": { "$divide": [ { "$multiply": [{ "$subtract": [ { "$add": [ "price", "fee" ] }, "discount" ] }, "column1" ] }, "column2"] },
    "column1": 1,
    "column2": 1,
    "sum": {
      "$sum": [
        "column3",
        "column4"
      ]
    }
  },
  "$lookup": [
    {
      "from": "table2",
      "type": "left",
      "localField": "table1.id",
      "foreignField": "table2.id"
    }
  ],
  "$match": {
    "column1": "funCode1",
    "$or": [
      {
        "score": {
          "$gt": 70,
          "$lt": 90
        }
      },
      {
        "views": {
          "$gte": 1000
        }
      }
    ]
  },
  "$limit": 100,
  "$skip": 100
}


### get run sql
GET http://localhost:8443/run/sql?requestParam=%7B%0A%20%20%22consumerProject%22%3A%20%22project-dev%22%2C%0A%20%20%22datasetName%22%3A%20%22dataset-dev%22%2C%0A%20%20%22filters%22%3A%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22id%22%3A%20%22fundGroup%22%2C%0A%20%20%20%20%20%20%22dbField%22%3A%20%7B%22fundGroup%22%3A%20%20%22t.group_name%22%2C%20%22sourceSystem%22%3A%20%20%22t.source_name%22%2C%20%22fund%22%3A%20%20%22t.fund_code%22%7D%2C%0A%20%20%20%20%20%20%22dataType%22%3A%20%22string%22%2C%0A%20%20%20%20%20%20%22value%22%3A%20%5B%0A%20%20%20%20%20%20%20%20%7B%22fundGroup%22%3A%20%22fg1%22%2C%20%22sourceSystem%22%3A%20%22ss1%22%2C%20%22fund%22%3A%20%22f1%22%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22fundGroup%22%3A%20%22fg2%22%2C%20%22sourceSystem%22%3A%20%22ss2%22%2C%20%22fund%22%3A%20%22f2%22%7D%5D%0A%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%22id%22%3A%20%22column2%22%2C%0A%20%20%20%20%20%20%22dbField%22%3A%20%22t.start_date%22%2C%0A%20%20%20%20%20%20%22dataType%22%3A%20%22date%22%2C%0A%20%20%20%20%20%20%22value%22%3A%20%7B%22fromDate%22%3A%20%222020-01-01%22%2C%20%22toDate%22%3A%20%222020-01-31%22%7D%0A%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%22id%22%3A%20%22column3%22%2C%0A%20%20%20%20%20%20%22dbField%22%3A%20%22t.price%22%2C%0A%20%20%20%20%20%20%22dataType%22%3A%20%22number%22%2C%0A%20%20%20%20%20%20%22value%22%3A%2010000%2C%0A%20%20%20%20%20%20%22condition%22%3A%20%22greater%22%0A%20%20%20%20%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22id%22%3A%20%22column3%22%2C%0A%20%20%20%20%20%20%22dbField%22%3A%20%22t.text%22%2C%0A%20%20%20%20%20%20%22dataType%22%3A%20%22string%22%2C%0A%20%20%20%20%20%20%22value%22%3A%20%22A%22%2C%0A%20%20%20%20%20%20%22condition%22%3A%20%22contains%22%0A%20%20%20%20%7D%0A%20%20%5D%2C%0A%20%20%22columns%22%3A%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22id%22%3A%20%22code%22%2C%0A%20%20%20%20%20%20%22dbField%22%3A%20%22t.code_name%22%2C%0A%20%20%20%20%20%20%22distinct%22%3A%20true%0A%20%20%20%20%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22id%22%3A%20%22tableName%22%2C%0A%20%20%20%20%20%20%22dbField%22%3A%20%22t.table_Name%22%0A%20%20%20%20%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22id%22%3A%20%22column1%22%2C%0A%20%20%20%20%20%20%22dbField%22%3A%20%22t.start_date%22%0A%20%20%20%20%7D%0A%20%20%20%20%5D%2C%0A%20%20%22from%22%3A%20%5B%22t%22%5D%2C%0A%20%20%22sort%22%3A%20%5B%7B%22id%22%3A%20%22column1%22%2C%20%22dbField%22%3A%20%22t.start_date%22%2C%20%22direction%22%3A%20%22ASC%22%7D%5D%2C%0A%20%20%22pageInfo%22%3A%20%7B%0A%20%20%20%20%22pageNumber%22%3A%201%2C%0A%20%20%20%20%22pageSize%22%3A%2010%0A%20%20%7D%0A%7D%0A
